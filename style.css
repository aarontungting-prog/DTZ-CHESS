body { margin: 0; background: #000; overflow: hidden; font-family: 'Microsoft JhengHei', sans-serif; color: white; touch-action: none; }
canvas { display: block; position: absolute; top: 0; left: 0; z-index: 0; }
#ui { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 100; }
.hud, .hud-container, #mobile-menu-btn { pointer-events: auto; }

/* 自檢系統 */
#system-monitor { position: absolute; top: 10px; left: 10px; z-index: 2000; font-size: 10px; background: rgba(0,0,0,0.7); padding: 8px; border-radius: 4px; pointer-events: none; color: #aaa; }
.status-row { margin-bottom: 2px; }
.dot { display: inline-block; width: 6px; height: 6px; border-radius: 50%; margin-right: 5px; }
.dot.yellow { background: #ff0; box-shadow: 0 0 5px #ff0; }
.dot.green { background: #0f0; box-shadow: 0 0 5px #0f0; }
.dot.red { background: #f00; box-shadow: 0 0 5px #f00; }

/* 登入 */
#auth-modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 2000; display: flex; justify-content: center; align-items: center; pointer-events: auto; }
.auth-box { background: #1a1a20; border: 1px solid #00e5ff; padding: 30px; border-radius: 12px; width: 300px; text-align: center; box-shadow: 0 0 20px rgba(0,229,255,0.2); }
.auth-input { width: 100%; padding: 10px; margin: 5px 0; background: #000; border: 1px solid #333; color: white; box-sizing: border-box; }
button { width: 100%; padding: 10px; margin-top: 5px; cursor: pointer; border-radius: 4px; border: none; font-weight: bold; }
.auth-btn, .game-btn { background: #00e5ff; color: #000; }
.guest-btn { background: transparent; color: #aaa; border: 1px solid #444; }

/* HUD */
.hud-container { position: absolute; top: 20px; left: 20px; width: 260px; display: flex; flex-direction: column; gap: 10px; }
.hud-box { background: rgba(0,0,0,0.85); padding: 15px; border-radius: 8px; border: 1px solid #444; backdrop-filter: blur(4px); }
.user-card-header { display: flex; align-items: center; gap: 10px; margin-bottom: 8px; }
.name-text { font-weight: bold; font-size: 16px; color: #fff; }
.elo-text { font-size: 12px; color: #888; }
.custom-btn { width: 100%; background: #222; color: #ccc; border: 1px solid #444; }
.lobby-title { color: #aaa; font-size: 12px; font-weight: bold; border-bottom: 1px solid #333; padding-bottom: 5px; margin-bottom: 8px; }
.room-status { font-size: 14px; color: #00ff00; margin-bottom: 12px; font-weight: bold; }
.logout-btn { background: transparent; color: #666; margin-top: 10px; width: 100%; }
.mode-btn { flex: 1; background: #222; color: #888; border: 1px solid #444; }
.mode-btn.active { background: #00e5ff; color: black; }

/* 狀態面板 */
#status-panel { position: absolute; top: 20px; right: 20px; background: rgba(0,0,0,0.6); padding: 10px 20px; border-radius: 30px; text-align: right; }
h1 { margin: 0; font-size: 1.2rem; color: #00e5ff; }

/* 手機選單 */
#mobile-menu-btn { display: none; position: absolute; bottom: 20px; left: 20px; background: #000; border: 2px solid #00e5ff; border-radius: 50%; width: 50px; height: 50px; justify-content: center; align-items: center; z-index: 3000; color: #00e5ff; font-size: 20px; }

/* 側邊與遮罩 */
#menu-backdrop { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 900; }
#menu-backdrop.active { display: block; }
.side-panel { position: fixed; top: 0; left: 0; bottom: 0; width: 300px; background: #111; transform: translateX(-105%); transition: 0.3s; z-index: 1200; padding: 20px; }
.side-panel.active { transform: translateX(0); }
.skin-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin-bottom: 10px; }
.skin-item { background: #222; border: 1px solid #333; padding: 10px; text-align: center; cursor: pointer; }
.skin-item.selected { border-color: #00e5ff; background: rgba(0,229,255,0.1); }
#loading { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: #000; display: flex; justify-content: center; align-items: center; color: #00e5ff; z-index: 1500; font-weight: bold; }
.mini-avatar { width: 40px; height: 40px; border-radius: 50%; object-fit: cover; }

@media (max-width: 600px) {
    #mobile-menu-btn { display: flex; }
    .hud-container { width: 100%; padding: 20px; bottom: 0; top: auto; left: 0; background: #111; border-top: 2px solid #00e5ff; transform: translateY(110%); transition: 0.3s; z-index: 2500; box-sizing: border-box; }
    .hud-container.mobile-visible { transform: translateY(0); }
    #status-panel { top: 15px; left: 50%; transform: translateX(-50%); width: auto; white-space: nowrap; right: auto; }
}
